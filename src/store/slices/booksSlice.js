import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';

// Mock data for books with real content
const mockBooks = [
  {
    id: 1,
    title: "Коран",
    author: "",
    description: "Священная книга мусульман",
    cover: "https://images.unsplash.com/photo-1542816417-0983c9c9ad53?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
    isPro: false,
    category: "religious",
    content: `# Священный Коран

## Введение

**Коран** (араб. القرآن‎) — священная книга мусульман, слово Аллаха, переданное пророку Мухаммаду ﷺ через архангела Джибриля (Гавриила).

## Структура Корана

Коран состоит из **114 сур** (глав), которые делятся на **аяты** (стихи). Суры различаются по длине и содержанию.

### Классификация сур:

1. **Мекканские суры** — ниспосланы в Мекке (86 сур)
2. **Мединские суры** — ниспосланы в Медине (28 сур)

## Первая сура - Аль-Фатиха

**На арабском языке:**

بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ
الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ
الرَّحْمَٰنِ الرَّحِيمِ
مَالِكِ يَوْمِ الدِّينِ
إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ
اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ
صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ وَلَا الضَّالِّينَ

**Перевод:**

1. Во имя Аллаха, Милостивого, Милосердного!
2. Хвала Аллаху, Господу миров,
3. Милостивому, Милосердному,
4. Властелину Дня воздаяния!
5. Тебе одному мы поклоняемся и Тебя одного молим о помощи.
6. Веди нас прямым путем,
7. путем тех, которых Ты облагодетельствовал, не тех, на которых пал гнев, и не заблудших.

## Значение Корана в исламе

Коран является **главным источником** исламского вероучения и права. Мусульмане верят, что:

- Коран — **прямое слово Аллаха**
- Текст **не подвергался изменениям**
- Каждая буква священна
- Чтение Корана — **поклонение Аллаху**

## Правила чтения

1. **Состояние ритуальной чистоты** (вуду)
2. **Почтительное отношение**
3. **Размышление** над смыслом
4. **Правильное произношение** (таджвид)

---

*Этот текст содержит лишь краткое введение в изучение Корана. Для полного понимания рекомендуется изучение под руководством знающих учителей.*`
  },
  {
    id: 2,
    title: "Сорок хадисов",
    author: "имам Ан-Навави",
    description: "Сборник основных хадисов Пророка Мухаммада ﷺ",
    cover: "https://images.unsplash.com/photo-1609706808980-8c37dadc0c15?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
    isPro: false,
    category: "hadith",
    content: `# Сорок хадисов имама Ан-Навави

## О составителе

**Имам Ан-Навави** (1233-1277) — великий исламский ученый, автор множества трудов по исламскому праву, хадисам и духовности.

## Введение

Данный сборник содержит **сорок важнейших хадисов**, которые охватывают основы исламской веры, поклонения и нравственности.

## Хадис №1 - О намерениях

### Арабский текст:
عَنْ أَمِيرِ الْمُؤْمِنِينَ أَبِي حَفْصٍ عُمَرَ بْنِ الْخَطَّابِ رَضِيَ اللَّهُ عَنْهُ قَالَ: سَمِعْتُ رَسُولَ اللَّهِ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ يَقُولُ: "إِنَّمَا الْأَعْمَالُ بِالنِّيَّاتِ، وَإِنَّمَا لِكُلِّ امْرِئٍ مَا نَوَى"

### Перевод:
От повелителя верующих Абу Хафса Умара ибн аль-Хаттаба, да будет доволен им Аллах, который сказал:

*"Я слышал, как посланник Аллаха ﷺ говорил: 'Поистине, дела оцениваются только по намерениям, и поистине, каждому человеку достается только то, что он намеревался получить.'"*

### Значение хадиса:
- **Намерение** — основа всех дел
- **Искренность** перед Аллахом обязательна
- **Результат** зависит от намерения
- Этот хадис — **основа исламской этики**

## Хадис №2 - Об исламе

### Арабский текст:
عَنْ عُمَرَ رَضِيَ اللَّهُ عَنْهُ أَيْضًا قَالَ: بَيْنَمَا نَحْنُ جُلُوسٌ عِنْدَ رَسُولِ اللَّهِ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ...

### История:
Однажды к Пророку ﷺ пришел человек в белых одеждах и спросил об **исламе, имане и ихсане**.

### Определения:

**Ислам** включает:
1. **Шахада** — свидетельство веры
2. **Салят** — молитва
3. **Закят** — обязательная милостыня
4. **Саум** — пост в Рамадан
5. **Хадж** — паломничество

**Иман** включает веру в:
1. **Аллаха**
2. **Ангелов**
3. **Писания**
4. **Пророков**
5. **Судный день**
6. **Предопределение**

**Ихсан** — поклонение Аллаху так, будто ты видишь Его.

---

*Продолжение следует... Каждый хадис содержит глубокую мудрость для жизни мусульманина.*`
  },
  {
    id: 3,
    title: "Путь к Аллаху",
    author: "Абу Ибрахим",
    description: "Духовный путь познания Всевышнего",
    cover: "https://images.unsplash.com/photo-1564769625905-50e93615e769?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
    isPro: false,
    category: "spiritual",
    content: `# Путь к Аллаху
## Руководство по духовному развитию

### Введение

Это руководство поможет вам **приблизиться к Аллаху** и **очистить свое сердце** от мирских привязанностей.

### Глава 1: Основы духовного пути

**Духовный путь** в исламе называется **тасаввуф** или **тарикат**. Это путь очищения души и приближения к Аллаху.

#### Этапы духовного развития:

1. **Тауба** (покаяние)
   - Искреннее раскаяние
   - Отказ от грехов
   - Решимость не возвращаться к ним

2. **Сабр** (терпение)
   - Терпение в поклонении
   - Терпение перед грехами
   - Терпение в испытаниях

3. **Шукр** (благодарность)
   - Признание милостей Аллаха
   - Благодарность сердцем
   - Выражение благодарности делами

#### Практические советы:

**Ежедневные практики:**
- Регулярная молитва
- Чтение Корана с размышлением
- Поминание Аллаха (зикр)
- Дуа в любое время

**Очищение сердца:**
- Избегание гордыни
- Борьба с завистью
- Развитие смирения
- Практика милосердия

---

*Помните: путь к Аллаху требует постоянства, искренности и терпения.*`
  },
  {
    id: 4,
    title: "40 уроков о вере",
    author: "Аль-Ассадай",
    description: "Фундаментальные основы исламской веры",
    cover: "https://images.unsplash.com/photo-1585829365295-ab7cd400c167?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
    isPro: true,
    category: "education",
    content: `# 40 уроков о вере

## Урок 1: Основы веры (Акыда)

### Что такое вера?

**Вера** (иман) в исламе — это не просто убеждение, а состояние души, которое включает:

1. **Убеждение сердцем** (تصديق بالقلب)
2. **Произнесение языком** (إقرار باللسان)
3. **Деяния органами тела** (عمل بالأركان)

### Столпы веры

**Шесть столпов веры:**

#### 1. Вера в Аллаха (الإيمان بالله)
- Единобожие (Таухид)
- Знание имен и качеств Аллаха
- Поклонение только Ему

#### 2. Вера в ангелов (الإيمان بالملائكة)
- Джибриль (мир ему) — ангел откровения
- Микаиль (мир ему) — ангел дождя и пропитания
- Исрафиль (мир ему) — ангел Судного дня
- Азраиль (мир ему) — ангел смерти

#### 3. Вера в Писания (الإيمان بالكتب)
- Коран — последнее Писание
- Тора — Моисею (мир ему)
- Евангелие — Иисусу (мир ему)
- Забур — Давуду (мир ему)

### Практическое применение

**Как укрепить веру:**

1. **Регулярное чтение Корана**
2. **Постоянное поминание Аллаха (зикр)**
3. **Изучение жизнеописания Пророка ﷺ**
4. **Общение с праведными людьми**
5. **Размышление о творении**

---

*Продолжение в следующих уроках...*`
  },
  {
    id: 5,
    title: "Плоды деяний",
    author: "Ави Нафс",
    description: "О важности праведных поступков в исламе",
    cover: "https://images.unsplash.com/photo-1591213954208-66b9e6ba0e44?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
    isPro: true,
    category: "spiritual",
    content: `# Плоды деяний
## Руководство по праведным поступкам

### Введение

В исламе каждое деяние имеет **плоды** — результаты, которые проявляются в этой жизни и в ахирате.

### Глава 1: Деяния сердца

#### Искренность (Ихлас)

**Плоды искренности:**
- Принятие деяний Аллахом
- Очищение души
- Духовное возвышение
- Благословение (барака) в делах

**Как развить искренность:**

1. **Постоянное самоанализ**
   - Проверка намерений перед каждым деянием
   - Борьба с показухой (рия)
   - Стремление к довольству Аллаха

2. **Тайные поклонения**
   - Ночные молитвы (тахаджуд)
   - Тайная милостыня
   - Скрытый зикр

#### Упование на Аллаха (Таваккуль)

**Плоды упования:**
- Душевный покой
- Защита от тревог
- Помощь Аллаха в делах
- Облегчение трудностей

### Глава 2: Деяния языка

#### Поминание Аллаха (Зикр)

**Формы зикра:**
- Субхан-Аллах (33 раза)
- Альхамду-лиллях (33 раза)
- Аллаху акбар (34 раза)
- Ля иляха илла-Ллах
- Астагфиру-Ллах

**Плоды зикра:**
- Успокоение сердца
- Защита от шайтана
- Увеличение добрых дел
- Близость к Аллаху

---

*Каждое праведное деяние приносит свои плоды в этой жизни и в следующей.*`
  },
  {
    id: 6,
    title: "Основы вероучения",
    author: "Шейх Мухаммад",
    description: "Базовые принципы исламской веры",
    cover: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
    isPro: true,
    category: "education",
    content: `# Основы вероучения
## Фундаментальные принципы ислама

### Введение

Эта книга освещает **основополагающие принципы** исламского вероучения, необходимые каждому мусульманину.

## Раздел 1: Таухид — Единобожие

### Определение Таухида

**Таухид** (توحيد) — это признание **единственности** Аллаха во всех аспектах:

#### Виды Таухида:

**1. Таухид ар-Рубубия** — единственность в господстве
- Аллах — единственный Создатель
- Аллах — единственный Управляющий
- Аллах — единственный Дающий пропитание

**2. Таухид аль-Улюхия** — единственность в поклонении
- Поклонение только Аллаху
- Не придавать сотоварищей в поклонении
- Направлять все виды поклонения только к Аллаху

**3. Таухид аль-Асма ва ас-Сифат** — единственность в именах и качествах
- 99 прекрасных имен Аллаха
- Совершенные качества Аллаха
- Отсутствие подобных Аллаху

### Практическое применение Таухида

**В повседневной жизни:**

1. **В молитве:**
   - Обращение только к Аллаху
   - Просьбы только у Аллаха
   - Поклоны только Аллаху

2. **В делах:**
   - Надежда только на Аллаха
   - Страх только перед Аллахом
   - Любовь к Аллаху превыше всего

3. **В трудностях:**
   - Терпение ради Аллаха
   - Упование на Аллаха
   - Обращение к Аллаху за помощью

## Раздел 2: Пророчество

### Необходимость пророков

Аллах отправлял пророков для:
- Разъяснения пути истины
- Предостережения от заблуждений
- Показа практического примера
- Передачи божественных законов

---

*Изучение основ вероучения — обязанность каждого мусульманина.*`
  }
];

export const fetchBooks = createAsyncThunk(
  'books/fetchBooks',
  async () => {
    // Симуляция API запроса
    return new Promise((resolve) => {
      setTimeout(() => resolve(mockBooks), 500);
    });
  }
);

const booksSlice = createSlice({
  name: 'books',
  initialState: {
    books: [],
    favorites: [],
    readingProgress: {},
    loading: false,
    error: null
  },
  reducers: {
    toggleFavorite: (state, action) => {
      const bookId = action.payload;
      if (state.favorites.includes(bookId)) {
        state.favorites = state.favorites.filter(id => id !== bookId);
      } else {
        state.favorites.push(bookId);
      }
    },
    updateReadingProgress: (state, action) => {
      const { bookId, progress } = action.payload;
      state.readingProgress[bookId] = progress;
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(fetchBooks.pending, (state) => {
        state.loading = true;
        state.error = null;
      })
      .addCase(fetchBooks.fulfilled, (state, action) => {
        state.loading = false;
        state.books = action.payload;
      })
      .addCase(fetchBooks.rejected, (state, action) => {
        state.loading = false;
        state.error = action.error.message;
      });
  }
});

export const { toggleFavorite, updateReadingProgress } = booksSlice.actions;
export default booksSlice.reducer;